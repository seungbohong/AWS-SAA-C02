# Amazon CloudFront

### Amazon CloudFront란?

- .html, .css, .js 및 이미지 파일과 같은 정적 및 동적 웹 콘텐츠를 사용자에게 더 빨리 배포하도록 지원하는 웹 서비스
- 엣지 로케이션이라고 하는 데이터 센터의 전 세계 네트워크를 통해 콘텐츠를 제공
- CloudFront를 통해 서비스하는 콘텐츠를 사용자가 요청하면 지연 시간이 가장 낮은 엣지 로케이션으로 요청이 라우팅되므로 최고의 성능으로 콘텐츠가 제공
- 이때 콘텐츠가 엣지 로케이션에 없는 경우 지정된 오리진(Amazon S3 버킷, Media Package 채널, HTTP 서버에서 콘텐츠를 검색)



### 1. 콘텐츠를 전송하도록 CloudFront를 설정하는 방법

CloutFront 배포를 생성하여 CloudFront에 어디로부터 콘텐츠를 전송하려고 하는지와 이러한 콘텐츠 전송을 추적 및 관리하는 방법에 대한 세부 정보를 알림. 그런 다음 CloudFront는 최종 사용자와 인접한 컴퓨터(엣지 서버)를 사용하여 사용자가 콘텐츠를 사용하거나 보고자 할 때 빠르게 전송한다.

<img width="499" alt="스크린샷 2021-05-29 오후 4 28 22" src="https://user-images.githubusercontent.com/45779378/120062024-e4bcb100-c09a-11eb-85e5-d01627659a75.png">

1. Amazon S3 버킷 또는 고유 HTTP 서버와 같은 오리진 서버를 지정하고, CloudFront는 이로부터 파일을 가져온 다음전 전 세계 CloudFront 엣지 로케이션에 배포.

   오리진 서버는 객체의 최종 원본 버전을 저장. HTTP를 통해 콘텐츠를 서비스 하려는 경우 오리진 서버가 Amazon S3 버킷 또는 웹 서버 같은 HTTP 서버이다. HTTP 서버는 Amazon EC2 인스턴스나 사용자가 관리하는 서버에서 실행 가능

2. 오리진 서버에 파일을 업로드 함.객체라고도 하는 파일은 일반적으로 웹 페이지, 이미지 및 미디어 파일을 포함하지만 HTTP를 통해 제공될 수 있는 모든 항목이 될 수 있음.

   Amazon S3 버킷을 오리진 서버로 사용할 경우 버킷에 있는 객체를 공개적으로 Read할 수 있는 상태로 만들 수 있으므로 객체의 CloudFront URL을 아는 사람이라면 누구나 엑세스 할 수 있음.물론 객체를 비공개로 유지하고 액세스 할 수 있는 사용자를 제어할 수 있는 옵션도 존재.

3. 사용자가 웹 사이트나 애플리케이션을 통해 파일을 요청할 경우 어떤 오리진 서버에서 파일을 가져올지 알려 주는 CloudFront 배포를 만듭니다. 동시에 CloudFront에서 모든 요청을 기록할 지, 배포를 만들자마자 활성화할지 여부와 같은 세부사항을 지정

4. CloudFront는 새 배포에 도메인 이름을 할당하고, 이는 CloudFront 콘솔에서 볼 수 있다. 또는 API 요청 등과 같은 프로그램 요청에 대한 응답으로 반환한다.

   원하는 경우 대체 도메인 이름도 추가할 수 있음.

5. CloudFront에는 배포의 구성을 모든 해당 엣지 로케이션 또는 CloudFront가 파일의 사본을 캐싱하는 지리적으로 분산된 데이터 센터의 POP서버 모음으로 보냄.
