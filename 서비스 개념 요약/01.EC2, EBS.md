# EC2, EBS



### 1. EC2 구입 옵션

- 온디맨드 인스턴스
- 스폿 인스턴스
- 예약 인스턴스
- 하드웨어 전용 인스턴스
- Dedicated Host
- 베어메탈



### 2. 예약 인스턴스

이용기간을 장기간 지정함으로써 온디맨드 인스턴스보다 75% 저렴하다.

일정시간이나 사용량이 예측가능한 워크로드나 장애대책등 캐퍼시티 예측이 가능한 어플리케이션에 적합하다.



### 3. 스폿 인스턴스

예비 컴퓨팅 용량을 온디맨드 인스턴스에 비해 최대 90%할인된 가격에 이용할 수 있다.

예비용을 입착식으로 이용한다.

기동하는데 통상적으로 시간이 걸린다.

예비용이기때문에 도중에 삭제될 가능성이 있으므로 일시적인 확장용 용도로 이용된다.



### 4. 물리적 서버에 인스턴스를 기동하는 방식들

- 하드웨어 전용 인스턴스 : 전용 HW의 VPC에서 실행되는 EC2 인스턴스이다. 호스트 HW차원에서 다른 AWS계정에 속한 인스턴스로 부터 물리적으로 분리할 수 있다. 같은 AWS 계정의 인스턴스와는 HW를 공유할 가능성이 있다.
- Dedicated Host : EC2 instance용량을 완전히 고객전용으로 이용할 수 있는 물리 서버이다. 서버에 바인딩된 기존 소프트웨어 라이센스를 이용할 수 있다.
- Bear Metal : 어플리케이션은 그 기반이되는 서버의 프로세서와 메모리에 직접 접근가능한 인스턴스이다. AWS 각종 서비스와의 연계가 가능하여 OS가 직접 하부의 하드웨어에 접근할 수 있다.



### 5. Placement Group(배치 그룹)

여러개의 인스턴스를 논리적으로 그룹화하여 퍼포먼스 개선이나 장애내구성을 높일 수 있다.

클러스터 배치 그룹, 파티션 배치그룹, 스플릿 배치그룹으로 나뉜다.



### 6. EC2가 사용 가능한 블록 스토리지

- EBS와 Instance Store가 있다.
- Instance Store : 호스트 컴퓨터에 내장되어 있는 디스크로, EC2와 떼어낼 수 없는 블록레벨의 물리 스토리지. EC2를 정지시키면 데이터가 날라간다. 무료이다.
- EBS : 네트워크로 접속된 블록레벨의 스토리지. EC2와 별도관리여서 EC2를 정지시켜도 데이터가 날아가지 않는다. Snapshot을 S3에 저장함. 유료.



### 7. EBS의 특징

- Volume data는 AZ내에서 여러개의 HW에 자동으로 카피된다. 장단화 불필요.
- Security Group에 의한 통신제어 대상이 아니라서 모든 포트를 닫아도 EBS는 사용 가능하다.
- 데이터가 영구보존된다.
- 서로 다른 AZ에 EC2가 하나씩 있고, 거기에 각각 EBS가 있을 경우, 다른 AZ간 EBS접속은 불가능하다.
- EC2 Instance에 여러개의 EBS를 연결할 수는 있지만, EBS를 여러개의 EC2에 연결할 수는 없다. 단 Provisioned IOPS는 가능함.
- EC2 Instance하나에 여러개의 EBS를 바꿔 연결할 수는 있음. 같은 AZ안에 있는 EC2에 한해서.
- 스냅샷을 S3에 보존가능함. 스냅샷은 다른 AZ에서도 복원할 수 있음.
- 스냅샷은 권한 이양이 가능함. 다른 계정에 이양할 수 있음.



### 8. EBS Volume Type의 사용예

- 범용 SSD : 가상 데스크톱, 저지연성을 요구하는 어플, 소-중 규모의 데이터베이스, 개발환경
- Provisioned SSD : 높은 I/O를 요구하는 NoSQL이나 어플, 대형 워크로드가 필요한 DB
- Throughput Optimized HDD : Bigdata process, DWH, 대규모 ETL처리, 로그분석, 루트볼륨 이용불가
- Cold HDD : Logdata등 접근빈도가 낮은 데이터, 백업, 아카이브, 루트 볼륨 이용 불가
- Magnetic : 구세대 볼륨, 기본적으로 이용 X, 데이터 접근빈도가 낮고 적은 워크로드용